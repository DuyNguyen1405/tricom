<h1><%= (t 'title.kintai')%></h1>

<% user = Shainmaster.find(session[:user]) %>

<div class="col-md-2 col-xs-4 col-sm-6 col-lg-2">
  <h4>勤務工数表</h4>
</div>
<div class="col-md-2 col-xs-4 col-sm-6 col-lg-2">
  <h4>氏名： <%=user.氏名 %></h4>
</div>
<div class="col-md-2 col-xs-4 col-sm-6 col-lg-2">
  <h4>担当者番号： <%=user.社員番号 %></h4>
</div>
<div class="col-md-2 col-xs-4 col-sm-6 col-lg-2">
  <h4>有給残数：<%=user.有給残数 %></h4>
</div>



<table style="font-size: 12px; border-left: 1px solid #000; border-right: 1px solid #000">
  <thead style="display: table-header-group">
  <tr style="page-break-inside: avoid;">
    <th rowspan="2" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">日付</th>
    <th rowspan="2" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">曜日</th>
    <th rowspan="2" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">タイプ</th>
    <th rowspan="2" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">出勤時間</th>
    <th rowspan="2" width="7%" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">退社時間</th>

    <th colspan="6" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">就 業 時 間</th>

    <th rowspan="2" class="table-width" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">保守携帯</th>
    <th rowspan="2" style="border-right: 1px solid #000; border-bottom: 1px solid #000; border-top: 1px solid #000">処理区分</th>
    <th rowspan="2" style=" border-bottom: 1px solid #000; border-top: 1px solid #000" >備考</th>
  </tr>
  <tr style="page-break-inside: avoid;">
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">実労働時間</th>
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">遅刻早退</th>
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">普通残業</th>
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">深夜残業</th>
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">普通保守</th>
    <th style="border-right: 1px solid #000; border-bottom: 1px solid #000">深夜保守</th>
  </tr>
  </thead>

  <tbody>
    <% @kintais.each do |kintai| %>
      <% add_class = 'warning' if kintai.曜日.in?(['日','土']) ||
        kintai.try(:holiday) == '1' %>
      <% add_class = 'success' if kintai.日付 == @date_now %>
      <tr id="kintai-<%= kintai.id %>" class="<%= add_class %>" style="page-break-inside: avoid;">
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.日付 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.曜日 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.勤務タイプ %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.出勤時刻.to_s(:time) unless kintai.出勤時刻.blank? %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.退社時刻.to_s(:time) unless kintai.退社時刻.blank? %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.実労働時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.遅刻時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.普通残業時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.深夜残業時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.普通保守時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><%= kintai.深夜保守時間 %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"> <% if kintai.保守携帯回数 == 1 %> 1:保守携帯 <% end %></td>
        <td style="border-right: 1px solid #000; border-bottom: 1px solid #000"><% if !kintai.状態1.nil? %>
          <%= kintai.joutaimaster.try(:状態名) %>
          <% end %>
        </td>
        <td style="border-bottom: 1px solid #000">
          <% if !kintai.備考.nil? && kintai.備考.length > 20%>
            <div class = "div_scoll">
          <% else %>
            <div>
          <% end %>
          <%= kintai.備考 %></div></td>

      </tr>
    <% end %>
  </tbody>

</table>
